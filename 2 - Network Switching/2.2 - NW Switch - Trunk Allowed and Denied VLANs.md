# Network Switching - Trunk - Allowed/Denied VLANs

+ The primary purpose of a trunk link is to carry traffic from multiple VLANs over a single physical link, allowing for the extension of VLANs across a network of switches and enabling efficient, high-bandwidth.
+ Trunk links use the IEEE 802.1Q encapsulation (tagging) method, which inserts a tag into the frame header to identify the specific VLAN for each data packet.
+ By default all VLANs are permitted through a trunk interface.
+ However, it is possible to allow or deny specific VLANs through the trunk interface; preventing unnecessary traffic from being propagated across the network.

**Commands**
+ For a specific interface/trunk (e.g. fa0/1) execute the following:
	+ Allow all VLANs (default config): `switchport trunk allowed vlan all`
	+ Only allow VLAN 10: `switchport trunk allowed vlan 10`
	+ Only allow VLANs 10, 30, 50-70: `switchport trunk allowed vlan 10,30,50-70`
	+ Allow all VLANs except 10: `switchport trunk allowed vlan except 10`

### Tasks
1. Create VLAN topology in Packet Tracer
2. Config endpoint IP address
3. Config VLANs on switches
4. Config Switchports with VLAN IDs
5. Config Trunks & confirm all VLANs allowed
6. Allow/Deny VLANs on the trunks
7. Confirm which VLANs are allowed on trunks

#### Step 3 - Create VLANs (& Trunks - Task 5)

**Switch 0**
conf t
hostname SW0
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
int range f0/1-2
switchport mode trunk
exit
vlan 10
name IT
exit
vlan 20
name HR
exit
vlan 30
name ACC
vlan 40
name hack1
exit
vlan 50
name hack2
exit
do sh vlan
do wr

**Switch 1**
conf t
hostname SW1
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
int range f0/1-2
switchport mode trunk
exit
vlan 10
name IT
exit
vlan 20
name HR
exit
vlan 30
name ACC
exit
vlan 40
name hack1
exit
vlan 50
name hack2
exit
do sh vlan
do wr

#### Step 4 - Assign VLAN IDs to Ports/Interfaces
**Switch 0**
VLAN 10 f0/3
VLAN 20 f0/4
VLAN 30 f0/5

!Configure Ports on Switch0
int range f0/3
switchport mode access
switchport access vlan 10
exit
int range f0/4
switchport mode access
switchport access vlan 20
exit
int range f0/5
switchport mode access
switchport access vlan 30
exit
do sh vlan
do wr

**Switch 1**
VLAN 10 f
VLAN 10 f0/3
VLAN 20 f0/4
VLAN 30 f0/5

!Configure Ports on Switch1
int range f0/3
switchport mode access
switchport access vlan 10
exit
int range f0/4
switchport mode access
switchport access vlan 20
exit
int range f0/5
switchport mode access
switchport access vlan 30
exit
do sh vlan
do wr

#### Step 5 - Confirm all VLANs allowed
! Priveleged Exec Mode
sh int trunk

### Step 6 - Trunk Allow/Deny VLANs
! Deny VLANs 40 + 50 (Use whitelisting instead of blacklisting)
int range f0/1-2
switchport trunk allowed vlan 1,10,20,30
end
sh int trunk
wr