# Network Devices and Their Roles

## Switches (OSI Layer 2 & TCP/IP Layer 1)
+ Functions at Network Access layer 1 of the TCP/IP model (Data link layer 2 of OSI model).
+ Forwards frames based on NIC MAC addresses.

**Function**
+ Build a MAC address table (Content Addressable Memory), mapping MAC addresses to specific switch ports.
+ Forward/filter frames based on the destination MAC adderss (instead of broadcasting them to all ports).
+ Segment broadcast domains logically.
+ Trunks (802.1Q) allows multiple VLANs to operate over a single link (native VLAN untagged).
+ Spanning Tree Protocol (STP): Prevents loops by blocking redundant links, thus preventing broadcast storms and ensuring stable network connection.
+ EtherChannel - Cisco's implementation of link aggregation (bundling multiple physical ethernet links into a single logical, high-speed link).
	- _Port Aggregation Protocol (PAgP)_: proprietary protocol to form an EtherChannel and supports 4 interface modes (ON, Desirable, Auto, Off).
	- _Link Aggregration Control Protocol (LACP)_: Enables Cisco's switches to automatically aggregrate multiple links into a single, high-bandwidth, logical channel known as *Port Channel* or *Link Aggregation Group*. 

**Security Features**
+ Port Security - limit/filter MAC addresses
+ DHCP Snooping - prevent rogue DHCP servers by specifying trusted ports
+ Dynamic ARP Inspection - Prevent ARP poisoning
+ IP Source Guard - prevent IP address spoofing on switch ports by filtering traffic to allow only legitimate IP and MAC address bindings
+ Bridge Protocol Data Unit (BPDU) Guard - messages used by STP to prevent network loops.
+ Root Guard - prevent rogue switches from becoming the root bridge.
+ Access Control List (ACLs) (dependent on switch model)
+ VLANs

**Placement**: Access (user ports), sometimes Distribution (uplinks, L2 services).

## Multilayer (Layer 3) Switches
+ Functions at the Internet layer 2 of the TCP/IP model (Network layer 3 of the OSI Model).
+ Forwards packets based on IP addresses.

**Function**
+ Switch Virtual Interfaces (SVI) (VLAN interfaces) for inter-VLAN routing.
+ Routed ports (no switchport) - 'convert' a layer 2 port to a layer 3 port (which can be assigned an IP address).
+ Enable static and dynamic routing

**Security Features**
+ VLANs
+ ACLs
+ Dynamic ARP Inspection

**Placement**: Distribution/Core.

## Routers
+ Functions at the Internet layer 2 of the TCP/IP model (Network layer 3 of the OSI Model).
+ Forwards packets based on IP addresses.

**Function**
+ Route between IP networks and maintain routing table.
+ Static/default routes and dynamic protocols (CCNA: OSPF).
+ Network Address Translation (NAT): modify IP addresses & port number (within packet headers) to map private internal to public IP Addresses.
+ Port Address Translation (PAT): aka NAT Overload allows multiple internal devices to share a single IP address.
+ Subinterfaces for Router-on-a-Stick (RoAS) inter-VLAN routing.


**Security Features**
+ Firewal
+ ACLs
+ Authentication, Authorization, and Accounting (AAA)
+ Secure Access
+ Intrusion Prevention/Detection Systems (IPS/IDS)

## Firewalls
+ **Packet Filtering**: each packet is inspected and denied/permitted based on pre-defined rules such as source/destination IP address, protocol, and port.
	- _Stateful_: Uses sessions and can understand stages of a TCP/IP connection.
	- _Stateless_: Each packet is treated as an isolated piece of communication; less processing & simple.
+ **Zone-Based Policy Firewall (ZBFW)**: a stateful firewall that controls traffic between logical groupings of interfaces known as "zones". 
	- Stateful inspection
	- Application-level inspection (identify and filter traffic based on over 1,400 Layer 7 applications)
	- Full-Qualified Domain Name (FQDN) filtering - match traffic based on domain names rather than relying solely on IP addresses.
	- High availability (HA)
+ **Context-Based Access Control (CBAC)**: interface-based stateful firewall that  applies firewall rules directly to router interfaces.
	- Stateful packet inspection
	- Application-level awareness (protocol specific - DNS, FTP)
	- DoS protection (TCP SYN floods)