# Routing - Configure Border Gateway Protocol (BGP)

**NOTE**: 
+ Refer to [0.0 Routing - Concepts & Notes](0.0 -  Routing - Concepts and Notes.md)


## Tasks
1. Create VLAN topology in Packet Tracer & Router/Switch/PCs Configuration.
2. Config Router & PC IP addresses
3. Config BGP on all routers, specify ASH and advertise directly connected networks.
4. Traceroute path between hosts.


### Task 1 + 2 - Router, Switch, and PC Basic Config

**Switch 0**
! Basic Config
conf t
hostname SW0
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cybersec.com

do wr

**Switch 1**
! Basic Config
conf t
hostname SW0
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cybersec.com

do wr

**Router 0**
! Basic Config
conf t
hostname R0
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cybersec.com

!Interface Config
int g0/2
description Link to R2
ip add 20.20.20.1 255.255.255.0
no sh
exit
int g0/0
description Link to R1
ip add 10.10.10.1 255.255.255.0
no sh
exit

do wr

**Router 1**
! Basic Config
conf t
hostname R1
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cybersec.com

!Interface Config
int g0/1
description Link to R2
ip add 192.168.1.1 255.255.255.0
no sh
exit
int g0/0
description Link to R1
ip add 10.10.10.2 255.255.255.0
no sh
exit

do wr


**Router 2**
! Basic Config
conf t
hostname R2
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cybersec.com

!Interface Config
int g0/1
description Link to R2
ip add 192.168.2.1 255.255.255.0
no sh
exit
int g0/2
description Link to R1
ip add 20.20.20.2 255.255.255.0
no sh
exit

do wr

### Task 3 - Config BGP on Routers
+ Specify the Autonomous System Number during BGP configuration.
+ Configure the 'edge' routers (R1 and R2) before configuring the central router R0.

**Router 1**
! ASN 20
router bgp 20
bgp router-id 1.1.1.1
! Config Next Hop/Neighbour IP & ASN (Router 0)
neighbor 10.10.10.1 remote-as 35
! Advertise Direct Connected Networks (Use Subnet Mask, not Wildcard Mask)
network 192.168.1.0 mask 255.255.255.0 
network 10.10.10.0 mask 255.255.255.252
ex

do wr

! View BGP Config
do sh ip bgp neigh

do sh ip bgp summary

do sh running-config | section router bgp

**Router 2**
! ASN 50
router bgp 50
bgp router-id 2.2.2.2
! Config Next Hop/Neighbour IP & ASN (Router 0)
neighbor 20.20.20.1 remote-as 35
! Advertise Direct Connected Networks (Use Subnet Mask, not Wildcard Mask)
network 192.168.2.0 mask 255.255.255.0 
network 20.20.20.0 mask 255.255.255.252
ex

do wr

! View BGP Config
do sh ip bgp neigh

do sh ip bgp sum

do sh running-config | section router bgp

**Router 0**
!ASN 35
router bgp 35
bgp router-id 3.3.3.3
! Config Next Hop/Neighbour IP & ASN (Routers 1 + 2)
neighbor 10.10.10.2 remote-as 20
neighbor 20.20.20.2 remote-as 50
! Advertise Direct Connected Networks (Use Subnet Mask, not Wildcard Mask)
network 10.10.10.0 mask 255.255.255.252
network 20.20.20.0 mask 255.255.255.252
ex

do wr

! View BGP Config
do sh ip bgp neigh

do sh ip bgp sum

do sh running-config | section router bgp


+ **NB**: Each router will display their respective messages upon convergence.

```
%BGP-5-ADJCHANGE: neighbor 20.20.20.2 Up

%BGP-5-ADJCHANGE: neighbor 10.10.10.1 Up
```

### Task 4 - Ping & Tracert PCs
+ Confirm all IPs and Configs are correct before the ping test.
+ The ping test will take time to resolve.

```
C:\>ping 192.168.1.2

Pinging 192.168.1.2 with 32 bytes of data:

Reply from 192.168.1.2: bytes=32 time<1ms TTL=125
Reply from 192.168.1.2: bytes=32 time<1ms TTL=125
Reply from 192.168.1.2: bytes=32 time<1ms TTL=125
Reply from 192.168.1.2: bytes=32 time<1ms TTL=125

Ping statistics for 192.168.1.2:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 0ms, Maximum = 0ms, Average = 0ms

C:\>ping 192.168.1.3

Pinging 192.168.1.3 with 32 bytes of data:

Reply from 192.168.1.3: bytes=32 time<1ms TTL=125
Reply from 192.168.1.3: bytes=32 time<1ms TTL=125
Reply from 192.168.1.3: bytes=32 time<1ms TTL=125
Reply from 192.168.1.3: bytes=32 time<1ms TTL=125

Ping statistics for 192.168.1.3:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 0ms, Maximum = 0ms, Average = 0ms

C:\>tracert 192.168.1.3

Tracing route to 192.168.1.3 over a maximum of 30 hops: 

  1   11 ms     0 ms      0 ms      192.168.2.1
  2   0 ms      0 ms      0 ms      20.20.20.1
  3   0 ms      0 ms      0 ms      10.10.10.2
  4   0 ms      0 ms      0 ms      192.168.1.3

Trace complete.
```