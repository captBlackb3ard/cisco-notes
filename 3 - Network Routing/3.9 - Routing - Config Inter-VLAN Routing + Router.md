# Routing - Configure Inter-VLAN Routing + Router DHCP



## Tasks
1. Create VLAN topology in Packet Tracer & Basic Router/Switch/Endpoint Configuration (enable DHCP).
2. Config VLANs, assign ports, and config trunks between switches and to the router.
3. Create subinterfaces on the router, bind them to respective VLAN IDs, and assign the IP address.
4. Create DHCP Pools, assign network address, default gateway, and DNS address.
5. Exclude ranges of IP address from dhcp pool.


## Configuration Commands
### Task 1 + 2 - Basic Switch, Router, & Endpoint Config

**Switch 0**
```
! Basic Config
conf t
hostname SW0
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cisco.com

!Config VLANs
vlan 10
name IT
exit
vlan 999
name blackhole
exit

!Configure Ports on Switch0
int range f0/1-3
switchport mode access
switchport access vlan 10
exit

! Secure Unused Ports
int range f0/4-24, g0/2
switchport mode access
switchport access vlan 999
shutdown
exit


! Configure Trunk to L3SW
int g0/1
switchport mode trunk
! Security - Deny VLAN 999 on trunk link
switchport trunk allowed vlan except 999
exit
do sh int trunk


! Additional Security - Port Security
int range f0/1-3
switchport port-security
switchport port-security maximum 1
! Define the mac address permitted to access the port/interface
switchport port-security mac-address sticky
switchport port-security violation restrict
exit

do sh port-security

do wr
```

**Switch 1**
```
! Basic Config
conf t
hostname SW1
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cisco.com

!Config VLANs
vlan 20
name HR
exit
vlan 999
name blackhole
exit
!Configure Ports on Switch0
int range f0/1-3
switchport mode access
switchport access vlan 20
exit

! Secure Unused Ports
int range f0/4-24, g0/2
switchport mode access
switchport access vlan 999
shutdown
exit

! Configure Trunk to L3SW
int g0/1
switchport mode trunk
! Security - Deny VLAN 999 on trunk link
switchport trunk allowed vlan except 999
exit
do sh int trunk

! Additional Security - Port Security
int range f0/1-3
switchport port-security
switchport port-security maximum 1
! Define the mac address permitted to access the port/interface
switchport port-security mac-address sticky
switchport port-security violation restrict
exit

do sh port-security

do wr
```

**Switch 2**
```
! Basic Config
conf t
hostname SW2
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cisco.com

!Config VLANs
vlan 30
name FIN
exit
vlan 999
name blackhole
exit
!Configure Ports on Switch0
int range f0/1-3
switchport mode access
switchport access vlan 30
exit

! Secure Unused Ports
int range f0/4-24, g0/2
switchport mode access
switchport access vlan 999
shutdown
exit

! Configure Trunk to L3SW
int g0/1
switchport mode trunk
! Security - Deny VLAN 999 on trunk link
switchport trunk allowed vlan except 999
exit
do sh int trunk

! Additional Security - Port Security
int range f0/1-3
switchport port-security
switchport port-security maximum 1
! Define the mac address permitted to access the port/interface
switchport port-security mac-address sticky
switchport port-security violation restrict
exit

do sh port-security

do wr
```


**L3SW0**
```
! Basic Config
conf t
hostname L3SW0
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cisco.com

vlan 10
name IT
exit
vlan 20
name HR
exit
vlan 30
name FIN
exit
vlan 999
name blackhole
exit

! Secure Unused Ports
int range g1/0/1-20, g1/1/1-4
switchport mode access
switchport access vlan 999
shutdown
exit

! Config Trunks
int range g1/0/21-24
switchport mode trunk
! Security - Deny VLAN 999 on trunk link
switchport trunk allowed vlan except 999
exit
do sh int trunk

do wr
```

**Router 0**
```
! Router Config
conf t
hostname R0
enable password cisco123
service password-encryption
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
ip domain-name cisco.com
username admin password password123
int g0/0
description Link to Internal Network
ip add 10.10.40.1 255.255.255.0
no sh
exit

! Config SSH Access
! Enable SSH with 1024-bit keys, set domain (for key generation), and force SSHv2
! Timeout authentication process (default 120)
crypto key generate rsa general-keys modulus 1024 
ip ssh version 2 
ip ssh time-out 60

! Config VTY SSH Access
line vty 0 15
! Specify authentication based on local db
login local
! Only permit SSH (no Telnet)
transport input ssh
exit

! Create Standard Numbered ACL list to allow IT Admin PC
access-list 10 permit host 10.10.10.2
access-list 10 deny any
! Bind the ACL to VTY 
line vty 0 15
! Allow incoming traffic on access-list 10
access-class 10 in
exit

do wr
```


### Task 3 - Config Router Subinterfaces & Bind to VLAN IDs

**Router 0**
```
! IT VLAN 10 & Gateway Bind
int g0/0.10
encapsulation dot1Q 10
ip add 10.10.10.1 255.255.255.0
exit

! HR VLAN 20 & Gateway Bind
int g0/0.20
encapsulation dot1Q 20
ip add 10.10.20.1 255.255.255.0
exit

! FIN VLAN 30 & Gateway Bind
int g0/0.30
encapsulation dot1Q 30
ip add 10.10.30.1 255.255.255.0
exit

do sh ip int br

do wr
```


### Task 4 - Create DHCP Pools (Network Address, Default Gateway, & DNS Server)
**Router 0**
```
! Enable DHCP Service
service dhcp

ip dhcp pool IT-Dpt-Pool
network 10.10.10.0 255.255.255.0
default-router 10.10.10.1
dns-server 10.10.10.1
exit

ip dhcp pool HR-Dpt-Pool
network 10.10.20.0 255.255.255.0
default-router 10.10.20.1
dns-server 10.10.20.1
exit

ip dhcp pool FIN-Dpt-Pool
network 10.10.30.0 255.255.255.0
default-router 10.10.30.1
dns-server 10.10.30.1
exit

do wr
```

### Task 5 - Exclude IPs from DHCP Pool
**Router 0**
```
ip dhcp excluded-address 10.10.10.1 10.10.10.11
ip dhcp excluded-address 10.10.20.1 10.10.20.11
ip dhcp excluded-address 10.10.30.1 10.10.30.11

! View DHCP IP Pool Config
do sh ip dhcp pool

!View DHCP IP Leases
do sh ip dhcp binding
```