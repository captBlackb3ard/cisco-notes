# Routing - Configure Inter-VLAN Routing using Multilayer Switch SVI

+ There are two methods to enable inter-vlan routing:
	- Router on a Stick
	- Switch Virtual Interfaces (SVI) using multilayer switches.

## Switch Virtual Interface (SVI)

+ A logical, software-based L3 interface associated with a specific VLAN, allowing a switch to act as a router to forward traffic between VLANs and provide IP host connectivity.

## Tasks
1. Create VLAN topology in Packet Tracer & Basic Switch/Endpoint Configuration.
2. Config VLANs and assign VIDs to the switchports per the VLANs.
3. Config trunk on the link connecting the two switches.
4. Config PC IP addresses per subnet & their respective default gateway.
5. Inter-VLAN ping test (should fail).
6. Config SVIs on the L3SW and assign IP address of the subnet.
7. Ensure IP address of each SVI is the default gateway of each VLAN subnet.
8. Enable IP routing on L3SW0.
9. Inter-VLAN ping test (should succeed).

## Configuration Commands
### Task 1 + 4 + 8 - Basic Switch, & Endpoint Config
**L3SW0**
```
! Basic Config
conf t
hostname L3SW0
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
! Enable IP Routing
ip routing

do wr
```

**Switch 1**
```
! Basic Config
conf t
hostname SW1
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup

do wr
```

### Task 2 - Config VLANs and Interfaces
+ L3SW0 must maintain a list of all the VLANs.

Trunk Link - L3SWO:G1/0/24 SW1:f0/24
VLAN 10 - L3SW0:f0/1-2
VLAN 20 - L3SW0:f0/3-4
VLAN 30 - SW1:f0/1-2

**L3SW0**
```
vlan 10
name IT
exit
vlan 20
name HR
exit
vlan 30
name FIN
exit
vlan 999
name blackhole
exit

!Configure Ports on Switch0
int range f0/1-2
switchport mode access
switchport access vlan 10
exit
int range f0/3-4
switchport mode access
switchport access vlan 20
exit
! Secure Unused Ports
int range f0/5-23, g0/1-2
switchport mode access
switchport access vlan 999
shutdown
exit

do sh vlan

do wr
```

**Switch 1**
```
vlan 30
name FIN
exit
vlan 999
name blackhole
exit
do sh vlan
!Configure Ports on Switch0
int range f0/1-2
switchport mode access
switchport access vlan 30
exit
! Secure Unused Ports
int range f0/3-23, g0/1-2
switchport mode access
switchport access vlan 999
shutdown
exit

do sh vlan

do wr
```


### Task 3 - Config Trunk (L3Switch-Switch)
+ Trunk encapsulation is required for ML 3560
**L3SW0**
```
int f0/24
switchport trunk encapsulation dot1Q
switchport mode trunk
! Security - Deny VLAN 999 on trunk link
switchport trunk allowed vlan except 999
exit
do sh int trunk

do wr
```

**Switch 0**
```
int f0/24
switchport mode trunk
! Security - Deny VLAN 999 on trunk link
switchport trunk allowed vlan except 999
exit
do sh int trunk

do wr
```

### Task 5 - Inter-VLAN Ping
+ Ping fails for inter-vlans.

### Task 6 + 7 - Config SVIs-VIDs on the L3SW and assign IP
**L3SW0**
```
! IT VLAN 10 & Gateway Bind
int vlan 10
no shut
ip add 10.10.10.1 255.255.255.0
exit

! HR VLAN 20 & Gateway Bind
int vlan 20
no shut
ip add 10.10.20.1 255.255.255.0
exit

! FIN VLAN 30 & Gateway Bind
int vlan 30
no shut
ip add 10.10.30.1 255.255.255.0
exit

do wr

do sh ip int br
```

### Task 9 - Inter-VLAN Ping
+ Ping succeeds for inter-vlans.