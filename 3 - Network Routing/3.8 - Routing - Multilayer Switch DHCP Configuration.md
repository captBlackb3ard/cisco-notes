# Routing - Multilayer Switch DHCP Configuration

+ The setup below automatically enables inter-vlan routing.
+ No trunks are configured between switches because the L3 switch cannot be configured with switchports if the connecting interfaces need to be assigned IPs.
+ Once configured, the Layer 3 switch handles all inter-vlan routing.

## Tasks
1. Create VLAN topology in Packet Tracer & Basic Switch/Endpoint Configuration.
2. Config IP addresses on L3 switch interface and enable routing
3. Create DHCP pools, assign network address, default gateway, and DNS Server address.
4. Exclude ranges of IP address from dhcp pool.
5. Config PCs for DHCP and verify.


## Configuration Commands
### Task 1 + 2 + 5 - Basic Switch, Router, & Endpoint Config
**Switch 1**
```
! Basic Config
conf t
hostname SW1
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cisco.com

do wr
```

**Switch 0**
```
! Basic Config
conf t
hostname SW0
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cisco.com

do wr
```

**L3SW0**
```
! Basic Config
conf t
hostname L3SW0
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cisco.com

do wr
! Enable Routing
ip routing
! Enable Gateway configuration (cannot be trunk anymore)
int range g1/0/23-24
no switchport
! Config default gateway
int g1/0/24
description Link to IT LAN
ip add 10.10.10.1 255.255.255.0
no sh
int g1/0/23
description Link to HR LAN
ip add 10.10.20.1 255.255.255.0
no sh
exit

do wr
```

### Task 3 - Create DHCP Pools

**L3SW0**
```
! Enable DHCP Service
service dhcp

ip dhcp pool IT-Dpt-Pool
network 10.10.10.0 255.255.255.0
default-router 10.10.10.1
dns-server 10.10.10.1
exit

ip dhcp pool FIN-Dpt-Pool
network 10.10.20.0 255.255.255.0
default-router 10.10.20.1
dns-server 10.10.20.1
exit

do wr
```

### Task 4 - Exclude IPs from DHCP Pool
**L3SW0**
```
ip dhcp excluded-address 10.10.10.1 10.10.10.11
ip dhcp excluded-address 10.10.20.1 10.10.20.11

do wr

! View DHCP IP Pool Config
do sh ip dhcp pool

!View DHCP IP Leases
do sh ip dhcp binding
```