# Routing - Configure Inter-VLAN Routing + Layer 3 Switch DHCP


## Tasks
1. Create VLAN topology in Packet Tracer & Basic Switch/Endpoint Configuration (enable DHCP).
2. Config VLANs, assign ports, and config trunks between L2 switches and L3 switch.
3. Enable IP routing on L3SW.
4. Create SVIs on L3SW as per VLAN ID and assign IP addresses.
5. Create DHCP pools, assign network address, default gateway, and DNS server address.
6. Exclude ranges of IP address from dhcp pool.
7. Test DHCP assignment + communication.

## Configuration Commands
### Task 1 + 2 - Basic Switch, Router, Endpoint, VLAN, & Trunk Config

**Switch 0**
```
! Basic Config
conf t
hostname SW0
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cisco.com

!Config VLANs
vlan 20
name IT
exit
vlan 999
name blackhole
exit

!Configure Ports on Switch0
int range f0/1-3
switchport mode access
switchport access vlan 20
exit

! Secure Unused Ports
int range f0/4-24, g0/2
switchport mode access
switchport access vlan 999
shutdown
exit


! Configure Trunk to L3SW
int g0/1
switchport mode trunk
! Security - Deny VLAN 999 on trunk link
switchport trunk allowed vlan except 999
exit
do sh int trunk


! Additional Security - Port Security
int range f0/1-3
switchport port-security
switchport port-security maximum 1
! Define the mac address permitted to access the port/interface
switchport port-security mac-address sticky
switchport port-security violation restrict
exit

do sh port-security

do wr
```

**Switch 1**
```
! Basic Config
conf t
hostname SW1
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cisco.com

!Config VLANs
vlan 30
name FIN
exit
vlan 999
name blackhole
exit
!Configure Ports on Switch0
int range f0/1-3
switchport mode access
switchport access vlan 30
exit

! Secure Unused Ports
int range f0/4-24, g0/2
switchport mode access
switchport access vlan 999
shutdown
exit

! Configure Trunk to L3SW
int g0/1
switchport mode trunk
! Security - Deny VLAN 999 on trunk link
switchport trunk allowed vlan except 999
exit
do sh int trunk

! Additional Security - Port Security
int range f0/1-3
switchport port-security
switchport port-security maximum 1
! Define the mac address permitted to access the port/interface
switchport port-security mac-address sticky
switchport port-security violation restrict
exit

do sh port-security

do wr
```

**Switch 2**
```
! Basic Config
conf t
hostname SW2
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cisco.com

!Config VLANs
vlan 40
name HR
exit
vlan 999
name blackhole
exit
!Configure Ports on Switch0
int range f0/1-3
switchport mode access
switchport access vlan 40
exit

! Secure Unused Ports
int range f0/4-24, g0/2
switchport mode access
switchport access vlan 999
shutdown
exit

! Configure Trunk to L3SW
int g0/1
switchport mode trunk
! Security - Deny VLAN 999 on trunk link
switchport trunk allowed vlan except 999
exit
do sh int trunk

! Additional Security - Port Security
int range f0/1-3
switchport port-security
switchport port-security maximum 1
! Define the mac address permitted to access the port/interface
switchport port-security mac-address sticky
switchport port-security violation restrict
exit

do sh port-security

do wr
```

**L3SW0**
```
! Basic Config
conf t
hostname L3SW0
ban motd ^Unauthorised Access is Prohibited. All Activity is Logged.^
enable password cisco123
service password-encryption
no ip domain-lookup
ip domain-name cisco.com

vlan 20
name IT
exit
vlan 30
name FIN
exit
vlan 40
name HR
exit
vlan 999
name blackhole
exit

! Secure Unused Ports
int range g1/0/4-24, g1/1/1-4
switchport mode access
switchport access vlan 999
shutdown
exit

! Config Trunks
int range g1/0/1-3
switchport mode trunk
! Security - Deny VLAN 999 on trunk link
switchport trunk allowed vlan except 999
exit
do sh int trunk

do wr
```

### Task 3 - Enable IP routing on L3SW
**L3SW0**
```
! Enable IP Routing
ip routing

do wr
```

### Task 4 - Create SVIs on L3SW
**L3SW0**
```
! IT VLAN 20 & Gateway Bind
int vlan 20
no shut
ip add 10.10.20.1 255.255.255.0
exit

! HR VLAN 30 & Gateway Bind
int vlan 30
no shut
ip add 10.10.30.1 255.255.255.0
exit

! FIN VLAN 40 & Gateway Bind
int vlan 40
no shut
ip add 10.10.40.1 255.255.255.0
exit

do wr

do sh ip int br
```

### Task 5 - Create DHCP pools

**L3SW0**
```
! Enable DHCP Service
service dhcp

ip dhcp pool IT-Dpt-Pool
network 10.10.20.0 255.255.255.0
default-router 10.10.20.1
dns-server 10.10.20.1
exit

ip dhcp pool FIN-Dpt-Pool
network 10.10.30.0 255.255.255.0
default-router 10.10.30.1
dns-server 10.10.30.1
exit

ip dhcp pool HR-Dpt-Pool
network 10.10.40.0 255.255.255.0
default-router 10.10.40.1
dns-server 10.10.40.1
exit

do wr
```

### Task 6 - Exclude DHCP Pool IP Ranges

**L3SW0**
```
ip dhcp excluded-address 10.10.20.1 10.10.20.11
ip dhcp excluded-address 10.10.30.1 10.10.30.11
ip dhcp excluded-address 10.10.40.1 10.10.10.11

do wr

! View DHCP IP Pool Config
do sh ip dhcp pool

!View DHCP IP Leases
do sh ip dhcp binding
```
